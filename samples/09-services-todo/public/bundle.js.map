{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://todo/./src/constants.js","webpack://todo/./src/listeners.js","webpack://todo/./src/render.js","webpack://todo/./src/services.js","webpack://todo/./src/state.js","webpack://todo/webpack/bootstrap","webpack://todo/webpack/runtime/define property getters","webpack://todo/webpack/runtime/hasOwnProperty shorthand","webpack://todo/webpack/runtime/make namespace object","webpack://todo/./src/todos.js"],"sourcesContent":["// Constants benefits\n// - reduces risk of typos (IDE can code-complete)\n// - easier to confirm it is correct (easier to check properties than strings)\n// - If a value changes, you can change it in one place and the rest of the code can continue to use the constant\n\n// Might be SERVER_CODES and CLIENT_CODES if we had more and different constants\nexport const SERVER = {\n  AUTH_MISSING: 'auth-missing',\n  AUTH_INSUFFICIENT: 'auth-insufficient',\n  REQUIRED_USERNAME: 'required-username',\n  REQUIRED_TASK: 'required-task',\n  TASK_MISSING: 'noSuchId', // Someone was inconsistent!\n};\n\nexport const CLIENT = {\n  NETWORK_ERROR: 'networkError',\n  NO_SESSION: 'noSession',\n};\n\nexport const MESSAGES = {\n  // The [] below uses the variable value as the key\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\n  // Here we use 'dog' to simulate a bad password\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\n  [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\n  default: 'Something went wrong.  Please try again',\n};\n","import {\n  fetchLogin,\n  fetchLogout,\n  fetchTodos,\n  fetchUpdateTodo,\n  fetchAddTodo,\n  fetchDeleteTodo,\n} from './services';\nimport {\n  waitOnTodos,\n  setTodos,\n  setError,\n  login,\n  logout,\n  updateTodo,\n  addTodo,\n} from './state';\nimport render from './render';\n\nexport function addAbilityToLogin({ state,  appEl }) {\n  // Using 'submit' so we can get both submit via button-click and by \"enter\"\n  appEl.addEventListener('submit', (e) => {\n    e.preventDefault();\n    if(!e.target.classList.contains('login__form')) {\n      return;\n    }\n\n    const username = appEl.querySelector('.login__username').value;\n    waitOnTodos();\n    render({ state, appEl }); // show loading state\n    fetchLogin( username )\n    .then( todos => {\n      login(username);\n      setTodos(todos);\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n\n  });\n}\n\nexport function addAbilityToLogout({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__logout')) {\n      return;\n    }\n    logout();\n    render({ state, appEl });\n    fetchLogout() // We don't really care about results\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToRefresh({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__refresh')) {\n      return;\n    }\n\n    waitOnTodos(); // Show loading state\n    render({ state, appEl });\n    fetchTodos()\n    .then( todos => {\n      setTodos(todos);\n      render({ state, appEl });\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToToggleComplete({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('todo__toggle')) {\n      return;\n    }\n    const id = e.target.dataset.id;\n    // Here I elect not show a waiting status...what impact could that have?\n    fetchUpdateTodo(id, { done: !state.todos[id].done } )\n    .then( todo => { // Service call returns the updated todo\n      updateTodo({ id, todo });\n      render({ state, appEl });\n    })\n    .catch( err => {\n      console.log(err);\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToAddTodo({ state, appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    if(!e.target.classList.contains('add__form')) {\n      return;\n    }\n    const task = appEl.querySelector('.add__task').value;\n    // Here I elect not show a waiting status...what impact could that have?\n    fetchAddTodo(task)\n    .then( todo => {\n      // Notice we get the id of the new todo from the returned todo\n      addTodo({ id: todo.id, todo });\n      render({ state, appEl });\n    })\n    .catch( err => {\n      console.log(err);\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToRemoveTodo({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('todo__delete')) {\n      return;\n    }\n    const id = e.target.dataset.id;\n    waitOnTodos(); // Show loading state\n    render({ state, appEl });\n    fetchDeleteTodo(id)\n      .then( () => {\n        return fetchTodos(); // Return the promise so we can chain\n      })\n      .then( todos => {\n        setTodos(todos);\n        render({ state, appEl });\n      })\n      .catch( err => {\n        setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n        render({ state, appEl });\n      });\n  });\n}\n\n","// Here we rebuild ALL the HTML whenever the state changes\n// That is not the most efficient way to do it\n// We COULD make these functions smarter about noticing what state changed\n// and what HTML is dependent on that state\n// and only replace the HTML that needs to be replaced\n// but we'll be moving to React soon where someone has already written that\n// The key part here is to see how the HTML is based on state\n// - at this stage, the \"action\" is not visible, only the state\n// - so our render is decoupled from the actions and events\n\nfunction render({ state, appEl }) {\n  const html = `\n   <main class=\"\">\n     ${ generateStatusHtml( state ) }\n     ${ generateLoginHtml( state ) }\n     ${ generateContentHtml( state ) }\n   </main>\n  `;\n  appEl.innerHTML = html;\n}\n\nfunction generateStatusHtml( state ) {\n  return `\n      <div class=\"status\">${state.error}</div>\n  `;\n}\n\nfunction generateLoginHtml( state ) {\n  if(state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading user...</div>\n    `\n  }\n  if(state.isLoggedIn) {\n    return ``;\n  }\n\n  // The #/login below isn't \"real\" - the form should never navigate\n  // I included it merely as a hint to what the form does\n  return `\n      <div class=\"login\">\n        <form class=\"login__form\" action=\"#/login\">\n          <label>\n            <span>Username:</span>\n            <input class=\"login__username\" value=\"\">\n          </label>\n          <button class=\"login__button\" type=\"submit\">Login</button>\n        </form>\n      </div>\n  `;\n}\n\nfunction generateContentHtml( state ) {\n  if(!state.isLoggedIn) {\n    return ``;\n  }\n  if(state.isTodoPending) {\n    return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <div class=\"todos__waiting\">Loading Todos...</div>\n      </div>\n    `;\n  }\n  return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <ul class=\"todos\">${generateTodosHtml( state )}</ul>\n        ${generateAddTodoHtml( state )}\n      </div>\n  `;\n}\n\nfunction generateControlsHtml( state ) {\n  return `\n        <div class=\"controls\">\n          <button class=\"controls__refresh\">Refresh</button>\n          <button class=\"controls__logout\">Logout</button>\n        </div>\n  `;\n}\n\nfunction generateTodosHtml( state ) {\n  const todosHtml = Object.values(state.todos).map( todo => {\n    const isDoneClass = todo.done ? \"todo__text--complete\" : \"\";\n    const isAddedClass = state.lastAddedTodoId === todo.id ? \"todo__text--added\" : \"\";\n    return `\n      <li class=\"todo\">\n        <label\n        >\n          <input\n            class=\"todo__toggle\"\n            data-id=\"${todo.id}\"\n            type=\"checkbox\"\n            ${todo.done ? \"checked\" : \"\"}\n          >\n          <span\n            data-id=\"${todo.id}\"\n            class=\"todo__toggle todo__text ${ isDoneClass } ${isAddedClass} \"\n          >\n            ${todo.task}\n          </span>\n        </label>\n        <button\n          data-id=\"${todo.id}\"\n          class=\"todo__delete\"\n        >\n          &#10060;\n        </button>\n      </li>\n      `;\n  }).join('') || `<p>No Todo Items yet, add one!</p>`;\n  return todosHtml;\n}\n\nfunction generateAddTodoHtml( state ) {\n  return `\n        <form class=\"add__form\" action=\"#/add\">\n          <input class=\"add__task\">\n          <button type=\"submit\" class=\"add__button\">Add</button>\n        </form>\n  `;\n}\n\nexport default render;\n","// Each of these functions is a bit repetitive\n// We COULD write a function that they each use to reduce that\n// But\n// (1) While these services all use the same structure, not all services will\n// (2) I wanted to demonstrate what was happening rather than abstract it away\n//     so that you will be able to write a different way to handle different services\n//\n// Key lesson: These functions all handle:\n// - MAKING the service calls\n// - Passing the data\n// - Parsing the results\n//\n// But these functions DO NOT\n// - change the state\n// - change the DOM\n//\n// This makes these functions fully decoupled and reuseable\n//\n// Notice they each return a promise. This is essential.\n// It allows the caller to attach reactions in then() and catch() clauses\nexport function fetchAddTodo(task) {\n  return fetch('/api/todos', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( { task } ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchDeleteTodo(id) {\n  return fetch(`/api/todos/${id}`, {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchUpdateTodo( id, todoUpdates ) {\n  return fetch(`/api/todos/${id}`, {\n    method: 'PATCH',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( todoUpdates ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchTodos() {\n  return fetch('/api/todos')\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchSession() {\n  return fetch('/api/session', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/session', {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogin(username) {\n  return fetch('/api/session', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json'\n    }),\n    body: JSON.stringify({ username }),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\n","import { MESSAGES } from './constants';\n\nconst state = {\n  // We store these as an object because we will access by id\n  todos: {},\n  isLoggedIn: false,\n  isLoginPending: true, // We start with our login status unknown\n  isTodoPending: false,\n  username: '',\n  lastAddedTodoId: '',\n  error: '',\n};\n\nexport function waitOnLogin() {\n  state.isLoggedIn = false;\n  state.isLoginPending = true;\n  state.username = '';\n  state.todos = {};\n  state.error = '';\n}\n\nexport function login(username) {\n  state.isLoggedIn = true;\n  state.isLoginPending = false;\n  state.username = username;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function logout() {\n  state.isLoggedIn = false;\n  state.isLoginPending = false;\n  state.username = '';\n  state.todos = {};\n  state.error = '';\n}\n\nexport function waitOnTodos() {\n  state.todos = {};\n  state.isTodoPending = true;\n  state.error = '';\n}\n\nexport function setTodos(todos) {\n  state.todos = todos;\n  state.isTodoPending = false;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function updateTodo({ id, todo }) {\n  state.todos[id] = todo;\n  state.error = '';\n  state.lastAddedTodoId = '';\n}\n\nexport function addTodo({ id, todo }) {\n  state.todos[id] = todo;\n  state.lastAddedTodoId = id;\n  state.error = '';\n}\n\nexport function setError(error) {\n  console.log(error);\n  if(!error) {\n    state.error = '';\n    return;\n  }\n  state.error = MESSAGES[error] || MESSAGES.default;\n}\n\nexport default state;\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from './constants';\nimport state, {\n  login,\n  logout,\n  waitOnTodos,\n  setTodos,\n  setError,\n} from './state';\nimport {\n  fetchAddTodo,\n  fetchDeleteTodo,\n  fetchUpdateTodo,\n  fetchTodos,\n  fetchSession,\n} from './services';\nimport render from './render';\nimport {\n  addAbilityToLogin,\n  addAbilityToLogout,\n  addAbilityToRefresh,\n  addAbilityToToggleComplete,\n  addAbilityToAddTodo,\n  addAbilityToRemoveTodo,\n} from './listeners';\n\n// Main code\n// This is where someone new to the code will see what happens on load\n// You want to make it easy to see the big picture\n// and easy to find the part you care about\n// - Why did you come here? To fix a bug? Add a feature?\n// - Make it easy to find the relevant code\n// - skimmable\n\nconst appEl = document.querySelector('#app');\nrender({ state, appEl });\naddAbilityToLogin({ state,  appEl });\naddAbilityToLogout({ state, appEl });\naddAbilityToRefresh({ state, appEl });\naddAbilityToToggleComplete({ state, appEl });\naddAbilityToAddTodo({ state, appEl });\naddAbilityToRemoveTodo({ state, appEl });\ncheckForSession();\n\n//////////\n\nfunction checkForSession() {\n  fetchSession()\n  .then( session => { // The returned object from the service call\n    login(session.username); // We do not have todos yet!\n    render({ state, appEl });            // Show we are logged in but don't have todos\n    return fetchTodos(); // By returning this promise we can chain the original promise\n  })\n  .catch( err => {\n    if( err?.error === SERVER.AUTH_MISSING ) {\n      return Promise.reject({ error: CLIENT.NO_SESSION }) // Expected, not a problem\n    }\n    return Promise.reject(err); // Pass any other error unchanged\n  })\n  .then( todos => {\n    setTodos(todos);\n    render({ state, appEl });\n  })\n  .catch( err => {\n    if( err?.error == CLIENT.NO_SESSION ) { // expected \"error\"\n      logout(); // No longer waiting, set to logged out case\n      render({ state, appEl });\n      return;\n    }\n    // For unexpected errors, report them\n    setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n    render({ state, appEl });\n  });\n}\n\n"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","TASK_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","fetchLogin","fetchLogout","fetchTodos","fetchUpdateTodo","fetchAddTodo","fetchDeleteTodo","waitOnTodos","setTodos","setError","login","logout","updateTodo","addTodo","render","addAbilityToLogin","state","appEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","todos","err","error","addAbilityToLogout","addAbilityToRefresh","addAbilityToToggleComplete","id","dataset","done","todo","console","log","addAbilityToAddTodo","task","addAbilityToRemoveTodo","html","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","isLoginPending","isLoggedIn","isTodoPending","generateControlsHtml","generateTodosHtml","generateAddTodoHtml","todosHtml","Object","values","map","isDoneClass","isAddedClass","lastAddedTodoId","join","fetch","method","headers","Headers","body","JSON","stringify","Promise","reject","response","ok","json","todoUpdates","fetchSession","waitOnLogin","document","checkForSession","session"],"sourceRoot":""}