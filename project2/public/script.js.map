{"version":3,"file":"script.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/script.js"],"sourcesContent":["export const SERVER = {\n    AUTH_MISSING: 'auth-missing',\n    AUTH_INSUFFICIENT: 'auth-insufficient',\n    REQUIRED_USERNAME: 'required-username',\n    REQUIRED_MESSAGE: 'required-message',\n};\n\nexport const CLIENT = {\n\tNETWORK_ERROR: 'network-error',\n\tNO_SESSION: 'noSession',\n};\n\nexport const MESSAGES = {\n\t[CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network, please try again later.',\n\t[SERVER.AUTH_MISSING]: 'Your session is invalid or has expired, logging you out...',\n\t[SERVER.REQUIRED_USERNAME]: 'Please enter a valid (within 20 letters and/or numbers) username.',\n\t[SERVER.AUTH_INSUFFICIENT]: 'Sorry, DOG is invalid, please use another username.',\n\t[SERVER.REQUIRED_MESSAGE]: 'Please enter a valid word!',\n\tdefault: 'Something went wrong, please try again later.',\n};","import { fetchLogin, fetchLogout, fetchMessages, fetchPostMessage, fetchUsers } from \"./services\";\nimport state, {waitOnLogin, waitOnUsers, waitOnMessages, login, logout, setUsers, setMessages, setError} from \"./state\";\nimport {render, renderMessages} from \"./render\";\n\nexport function loginListener(appEl){\n    appEl.addEventListener(\"submit\", (e) =>{\n        e.preventDefault();\n        if(!e.target.classList.contains(\"login-form\")){\n            return;\n        }\n\n        const username = appEl.querySelector(\".login-text\").value;\n        waitOnLogin();\n        render({state, appEl});\n        fetchLogin(username)\n        .then(() =>{\n            login(username);\n            waitOnUsers();\n            waitOnMessages();\n            render({state, appEl});\n            return Promise.all([fetchUsers(), fetchMessages()]);\n        })\n        .then((response) =>{\n            setUsers(response[0]);\n            setMessages(response[1]);\n            render({state, appEl});\n        })\n        .catch((err) => {\n            logout();\n            setError(err?.error || 'ERROR');\n            render({state, appEl});\n        });\n    });\n}\n\n\nexport function logoutListener(appEl){\n    appEl.addEventListener('click', (e) =>{\n        if(!e.target.classList.contains('logout-btn')){\n            return;\n        }\n\n        logout();\n        render({state, appEl});\n        fetchLogout()\n        .catch((err) =>{\n\t\t\tsetError(err?.error || 'ERROR');\n\t\t\trender({ state, appEl });\n        });\n    });\n}\n\n\nexport function sendMessageListener(appEl){\n    appEl.addEventListener(\"submit\", (e) =>{\n        if(!e.target.classList.contains('chat-form')){\n            return;\n        }\n\n        const message = appEl.querySelector('.message-text');\n\n        fetchPostMessage(message.value)\n        .then((messages) =>{\n            setMessages(messages);\n            renderMessages({ state, appEl });\n            message.value = '';\n        })\n        .catch((err) =>{\n            setError(err?.error || 'ERROR');\n            renderMessages({state, appEl});\n        });\n    });\n}\n","export function render({ state, appEl }) {\n\tconst html = `\n        ${generateErrorHtml(state)}\n        ${generateLoginHtml(state)}\n        ${generateChatHtml(state)}\n    `;\n\tappEl.innerHTML = html;\n}\n\n\nfunction generateErrorHtml( state ) {\n    if (!state.showError) {\n          return \"\";\n    }\n    return `\n        <div class=\"error\"><p class=\"error-message\">${state.errorMessage}</p></div>\n    `;\n  }\n\nfunction generateLoginHtml(state) {\n\n    if(state.isLoginPending){\n        return `<div class=\"waiting\">\n            <p>Loading Login...</p>\n        </div>`;\n    }\n\n    // into the chat page\n    if(state.isLoggedIn){\n        return \"\";\n    }\n\n\n    return `<div class=\"login\">\n\n        <h1>Login</h1>\n        <form class=\"login-form\">\n            <input name=\"username\" class=\"login-text\" type=\"text\" placeholder=\"Enter your username\">\n            <button type=\"submit\" class=\"login-btn\">Login</button>\n        </form>\n    </div>`;\n}\n\nfunction generateChatHtml(state) {\n    if(!state.isLoggedIn){\n        return \"\";\n    }\n\n    return `<div class=\"chat\">\n        <h1>Chat Room</h1>\n        <div class=\"menu\">\n            <span>User: ${state.username}</span>\n            <button class=\"logout-btn\">Logout</button>\n        </div>\n\n        <div class=\"chat-content\">\n            <div class=\"chat-users\">${generateUsersHtml(state)}</div>\n            <div class=\"chat-messages\">${generateMessagesHtml(state)}</div>\n        </div>\n\n        <div class=\"send-area\">\n            <form class=\"chat-form\">\n                <input class=\"message-text\" name=\"message\" placeholder=\"Enter your message\"/>\n                <button type=\"submit\" class=\"send-btn\">Send</button>\n            </form>\n        </div>\n    </div>`;\n}\n\nfunction generateUsersHtml(state) {\n    if(!state.isLoggedIn){\n        return \"\";\n    }\n\n    if(state.isUserPending){\n        return `<div class=\"waiting\">\n            <p>Loading Users...</p>\n        </div>`;\n    }\n\n    return `\n        <h2>Logged In Users</h2>\n        <ul class=\"user-list\"> ` + \n            Object.entries(state.users).map((user) => {\n                if (user[1]) { // if true: logged in user\n                    return `\n                        <li>\n                            <div class=\"user\">\n                                <span class=\"username\">${user[0]}</span>\n                            </div>\n                        </li>\n                    `;\n                }\n                return '';\n            }).join('') + \n        `</ul>`;\n}\n\n\nfunction generateMessagesHtml(state) {\n    if(!state.isLoggedIn){\n        return \"\";\n    }\n\n    if(state.isMessagePending){\n        return `<div class=\"waiting\">\n            <p>Loading Messages...</p>\n        </div>`;\n    }\n\n\treturn `\n        <ol class=\"message-list\">` + \n        state.messages\n\t\t\t.slice()\n\t\t\t.map((msg) => {\n\t\t\t\treturn `\n                    <div class=\"user-message\">\n                        <p class=\"send-message\">${msg.username} : ${msg.message}</p>\n                    </div>\n                `;\n\t\t\t})\n\t\t\t.join('') + \n        `</ol>`;\n}\n\n\nexport function renderUsers({ state, appEl }) {\n\tconst usersEl = appEl.querySelector('.chat-users');\n\tif (!usersEl) return;\n\tusersEl.innerHTML = generateUsersHtml(state);\n}\n\nexport function renderMessages({ state, appEl }) {\n\tconst messagesEl = appEl.querySelector('.chat-messages');\n\tif (!messagesEl) return;\n\tmessagesEl.innerHTML = generateMessagesHtml(state);\n}\n","\nexport function fetchSession(){\n\treturn fetch('/api/v1/session', {\n\t\tmethod: 'GET',\n\t})\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) =>{\n        if(response.ok){\n            return response.json();\n        }\n        return response.json()\n        .catch( (error) => Promise.reject({ error }) )\n        .then( (err) => Promise.reject(err));\n    })\n}\n\nexport function fetchLogin(username){\n    return fetch('/api/v1/session', {\n        method: 'POST',\n        headers: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ username }),\n    })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n        if (response.ok) {\n            return response.json();\n        }\n\n        return response.json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    })\n}\n\nexport function fetchLogout(){\n    return fetch('/api/v1/session', {\n        method: 'DELETE',\n    })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n        if (response.ok) {\n            return response.json();\n        }\n\n        return response.json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    })\n}\n\n\nexport function fetchUsers(){\n    return fetch('/api/v1/users', {\n        method: 'GET',\n    })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n        if (response.ok) {\n            return response.json();\n        }\n\n        return response.json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    })\n}\n\n\n\nexport function fetchMessages(){\n    return fetch('/api/v1/messages', {\n        method: 'GET',\n    })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n        if (response.ok) {\n            return response.json();\n        }\n\n        return response.json()\n        .catch((error) => Promise.reject({ error }))\n        .then((err) => Promise.reject(err));\n    })\n}\n\n\nexport function fetchPostMessage(message){\n    return fetch('/api/v1/messages', {\n        method: 'POST',\n        headers: new Headers({\n\t\t\t'content-type': 'application/json',\n\t\t}),\n\t\tbody: JSON.stringify({ message }),\n    })\n    .catch(() => Promise.reject({ error: 'network-error' }))\n    .then((response) => {\n        if (response.ok) {\n            return response.json();\n        }\n\n        return response.json()\n        .catch( (error) => Promise.reject({ error }) )\n        .then( (err) => Promise.reject(err));\n    });\n}","import { MESSAGES } from \"./constants\";\n\nconst state = {\n\tisLoggedIn: false,\n\tisLoginPending: true,\n\tisUsersPending: false,\n\tisMessagesPending: false,\n\tusername: '',\n\tusers: {},\n\tmessages: [],\n\tshowError: false,\n\terrorMessage: '',\n};\n\nexport function waitOnLogin(){\n\tstate.isLoggedIn = false;\n\tstate.isLoginPending = true;\n\tstate.users = {};\n\tstate.messages = [];\n\tstate.showError = false;\n}\n\nexport function login(username){\n\tstate.isLoggedIn = true;\n\tstate.isLoginPending = false;\n\tstate.showError = false;\n\tstate.username = username;\n}\n\nexport function logout(){\n\tstate.isLoggedIn = false;\n\tstate.isLoginPending = false;\n\tstate.users = {};\n\tstate.messages = [];\n\tstate.showError = false;\n\tstate.username = '';\n}\n\nexport function waitOnUsers(){\n\tstate.users = {};\n\tstate.isUsersPending = true;\n\tstate.showError = false;\n}\n\nexport function waitOnMessages(){\n\tstate.messages = [];\n\tstate.isMessagesPending = true;\n\tstate.showError = false;\n}\n\nexport function setUsers(users){\n\tstate.users = users;\n\tstate.isUsersPending = false;\n\tstate.showError = false;\n}\n\nexport function setMessages(messages){\n\tstate.messages = messages;\n\tstate.isMessagesPending = false;\n\tstate.showError = false;\n}\n\nexport function setError(error){\n    if(!error){\n        state.showError = false;\n        state.errorMessage = '';\n        return;\n    }\n\n    state.showError = true;\n    state.errorMessage = MESSAGES[error] || MESSAGES.default;\n}\n\n\n\nexport default state;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { fetchLogin, fetchLogout, fetchSession, fetchMessages, fetchPostMessage, fetchUsers } from \"./services\";\nimport state, {waitOnLogin, waitOnUsers, waitOnMessages, login, logout, setUsers, setMessages, setError} from \"./state\";\nimport { SERVER, CLIENT } from \"./constants\";\nimport {render, renderUsers, renderMessages} from \"./render\";\nimport { loginListener, logoutListener, sendMessageListener } from \"./listeners\";\n\nconst appEl = document.querySelector(\"#app\");\n\n\nloginListener(appEl);\nlogoutListener(appEl);\nsendMessageListener(appEl);\n\ncheckSession();\n\nfunction checkSession() {\n\twaitOnLogin();\n\trender({ state, appEl });\n\tfetchSession()\n    .then((session) => {\n        login(session.username);\n        waitOnUsers();\n        waitOnMessages();\n        render({ state, appEl });\n        return Promise.all([fetchUsers(), fetchMessages()]);\n    })\n    .then((resp) => {\n        setUsers(resp[0]);\n        setMessages(resp[1]);\n        render({ state, appEl });\n    })\n    .catch((err) => {\n        if (err?.error === SERVER.AUTH_MISSING) {\n            logout();\n            render({ state, appEl });\n        } else {\n            setError(err?.error || 'ERROR');\n            render({ state, appEl });\n        }\n    })\n    .then(() => {\n        setInterval(reloadPages, 5000);\n    });\n}\n\nfunction reloadPages() {\n    if(!state.isLoggedIn){ // login, go to chat page\n        return;\n    }\n\n\tfetchUsers()\n    .then((users) => {\n        setUsers(users);\n        renderUsers({ state, appEl });\n        return fetchMessages();\n    })\n    .then((messages) => {\n        // check if have new messages\n        if (messages.length === state.messages.length){\n            return;\n        } \n        setMessages(messages);\n        renderMessages({ state, appEl });\n    })\n    .catch((err) => {\n        if (err?.error === SERVER.AUTH_MISSING) {\n            logout();\n            setError(err?.error || 'ERROR');\n        }else{\n            setError(err?.error || 'ERROR');\n\n        }\n        render({ state, appEl });\n        \n    });\n}"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_MESSAGE","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","fetchLogin","fetchLogout","fetchMessages","fetchPostMessage","fetchUsers","state","waitOnLogin","waitOnUsers","waitOnMessages","login","logout","setUsers","setMessages","setError","render","renderMessages","loginListener","appEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","Promise","all","response","err","error","logoutListener","sendMessageListener","message","messages","_ref","html","concat","generateErrorHtml","generateLoginHtml","generateChatHtml","innerHTML","showError","errorMessage","isLoginPending","isLoggedIn","generateUsersHtml","generateMessagesHtml","isUserPending","Object","entries","users","map","user","join","isMessagePending","slice","msg","renderUsers","_ref2","usersEl","_ref3","messagesEl","fetchSession","fetch","method","reject","ok","json","headers","Headers","body","JSON","stringify","isUsersPending","isMessagesPending","document","checkSession","session","resp","setInterval","reloadPages","length"],"sourceRoot":""}